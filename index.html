
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BUDGET NEMESIS - Arcade Edition</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            --arcade-bg: #000000;
            --arcade-green: #00ff00;
            --arcade-red: #ff0000;
            --arcade-yellow: #ffff00;
            --arcade-cyan: #00ffff;
            --arcade-magenta: #ff00ff;
            --arcade-white: #ffffff;
        }

        body {
            font-family: 'Press Start 2P', monospace;
            background: var(--arcade-bg);
            color: var(--arcade-green);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .scanlines {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: repeating-linear-gradient(0deg, rgba(0,0,0,0.15), rgba(0,0,0,0.15) 1px, transparent 1px, transparent 2px);
            pointer-events: none; z-index: 9999;
        }

        .crt-effect {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(ellipse at center, transparent 0%, rgba(0,0,0,0.3) 100%);
            pointer-events: none; z-index: 9998;
        }

        .container { max-width: 1200px; margin: 0 auto; padding: 20px; position: relative; }

        .arcade-header {
            text-align: center; padding: 20px; margin-bottom: 30px;
            border: 4px solid var(--arcade-yellow); background: #000; position: relative;
        }

        h1 {
            font-size: 2rem; color: var(--arcade-yellow);
            text-shadow: 4px 4px 0 var(--arcade-red); margin-bottom: 15px;
            animation: titleBlink 2s infinite;
        }

        @keyframes titleBlink {
            0%, 49%, 51%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .subtitle { font-size: 0.8rem; color: var(--arcade-cyan); letter-spacing: 3px; }

        .month-display {
            background: #000; border: 3px solid var(--arcade-magenta);
            padding: 15px; text-align: center; margin-bottom: 20px;
            font-size: 1.2rem; color: var(--arcade-magenta);
        }

        .battle-screen {
            background: #000; border: 4px solid var(--arcade-green);
            padding: 30px; margin-bottom: 30px; min-height: 400px; position: relative;
        }

        .health-bars { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 40px; }

        .player-side, .nemesis-side { text-align: center; }

        .character-label {
            font-size: 0.7rem; margin-bottom: 10px; letter-spacing: 2px;
        }

        .player-side .character-label { color: var(--arcade-cyan); }
        .nemesis-side .character-label { color: var(--arcade-red); }

        .health-bar-container {
            background: #111; border: 3px solid; height: 30px;
            position: relative; overflow: hidden;
        }

        .player-side .health-bar-container { border-color: var(--arcade-cyan); }
        .nemesis-side .health-bar-container { border-color: var(--arcade-red); }

        .health-bar-fill {
            height: 100%; transition: width 0.5s; display: flex;
            align-items: center; justify-content: center; font-size: 0.6rem;
            position: relative;
            z-index: 2;
            font-weight: bold;
            text-shadow: 1px 1px 2px #000, -1px -1px 2px #000, 1px -1px 2px #000, -1px 1px 2px #000;
        }

        .player-health {
            background: repeating-linear-gradient(90deg, var(--arcade-cyan) 0px, var(--arcade-cyan) 10px, transparent 10px, transparent 20px);
            color: var(--arcade-cyan);
        }

        .nemesis-health {
            background: repeating-linear-gradient(90deg, var(--arcade-red) 0px, var(--arcade-red) 10px, transparent 10px, transparent 20px);
            color: var(--arcade-red);
        }

        /* SCARY NEMESIS - Built from scratch */
        .pixel-character { width: 220px; height: 220px; margin: 20px auto; position: relative; }

        .nemesis-sprite {
            width: 100%; height: 100%;
            background: 
                linear-gradient(180deg, 
                    #cc0000 0%, 
                    var(--arcade-red) 40%, 
                    #990000 100%);
            position: relative;
            animation: nemesisFloat 2.5s ease-in-out infinite;
            box-shadow: 
                inset -25px -25px 0 rgba(0,0,0,0.4),
                inset 15px 15px 0 rgba(255,0,0,0.3),
                0 0 0 6px #000,
                0 0 60px rgba(255,0,0,0.8);
        }

        @keyframes nemesisFloat {
            0%, 100% { transform: translateY(0px) scale(1); }
            50% { transform: translateY(-12px) scale(1.02); }
        }

        .nemesis-sprite.damaged {
            animation: damageShake 0.5s;
        }

        @keyframes damageShake {
            0%, 100% { transform: translateX(0); opacity: 1; }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); opacity: 0.7; }
            20%, 40%, 60%, 80% { transform: translateX(5px); opacity: 0.3; }
        }

        /* EVIL GLOWING EYES */
        .eye-container {
            position: absolute;
            top: 55px;
            left: 50%;
            transform: translateX(-50%);
            width: 140px;
            display: flex;
            justify-content: space-between;
        }

        .eye {
            width: 45px;
            height: 45px;
            background: var(--arcade-yellow);
            border: 5px solid #000;
            position: relative;
            box-shadow: 
                0 0 20px var(--arcade-yellow),
                inset 0 0 10px rgba(255,255,0,0.5);
            animation: eyePulse 2s infinite;
        }

        @keyframes eyePulse {
            0%, 100% { 
                box-shadow: 0 0 20px var(--arcade-yellow), inset 0 0 10px rgba(255,255,0,0.5);
                transform: scale(1);
            }
            50% { 
                box-shadow: 0 0 40px var(--arcade-yellow), 0 0 60px rgba(255,255,0,0.8), inset 0 0 15px rgba(255,255,0,0.8);
                transform: scale(1.05);
            }
        }

        .pupil {
            position: absolute;
            width: 20px;
            height: 20px;
            background: var(--arcade-red);
            bottom: 4px;
            left: 50%;
            transform: translateX(-50%);
            box-shadow: 
                0 0 10px var(--arcade-red),
                inset 0 0 5px #000;
            animation: pupilGlow 1.5s infinite;
        }

        @keyframes pupilGlow {
            0%, 100% { background: var(--arcade-red); }
            50% { background: #ff3333; box-shadow: 0 0 20px var(--arcade-red); }
        }

        /* ANGRY EYEBROWS - V-shaped scowl */
        .eyebrow-left {
            position: absolute;
            top: 42px;
            left: 28px;
            width: 55px;
            height: 10px;
            background: #000;
            transform-origin: right center;
            transform: rotate(20deg);
            box-shadow: 0 3px 5px rgba(0,0,0,0.5);
        }

        .eyebrow-right {
            position: absolute;
            top: 42px;
            right: 28px;
            width: 55px;
            height: 10px;
            background: #000;
            transform-origin: left center;
            transform: rotate(-20deg);
            box-shadow: 0 3px 5px rgba(0,0,0,0.5);
        }

        /* MENACING HORNS */
        .horn-left {
            position: absolute;
            top: -35px;
            left: 30px;
            width: 0;
            height: 0;
            border-left: 18px solid transparent;
            border-right: 18px solid transparent;
            border-bottom: 45px solid var(--arcade-yellow);
            transform: rotate(-10deg);
            filter: drop-shadow(0 5px 0 #000) drop-shadow(0 0 15px var(--arcade-yellow));
        }

        .horn-right {
            position: absolute;
            top: -35px;
            right: 30px;
            width: 0;
            height: 0;
            border-left: 18px solid transparent;
            border-right: 18px solid transparent;
            border-bottom: 45px solid var(--arcade-yellow);
            transform: rotate(10deg);
            filter: drop-shadow(0 5px 0 #000) drop-shadow(0 0 15px var(--arcade-yellow));
        }

        /* SHARP FANGS - INSIDE THE MOUTH */
        .fang-row {
            position: absolute;
            bottom: 38px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 12px;
            z-index: 5;
        }

        .fang {
            width: 0;
            height: 0;
            border-left: 11px solid transparent;
            border-right: 11px solid transparent;
            border-top: 24px solid var(--arcade-white);
            filter: drop-shadow(2px 2px 0 #000);
            animation: fangShine 3s infinite;
        }

        @keyframes fangShine {
            0%, 85%, 100% { opacity: 1; }
            90% { opacity: 0.8; }
            95% { opacity: 1; }
        }

        /* ANGRY DOWNTURNED MOUTH - actual frown */
        .mouth {
            position: absolute;
            bottom: 35px;
            left: 50%;
            transform: translateX(-50%);
            width: 110px;
            height: 35px;
            border: 6px solid #000;
            border-bottom: none;
            border-radius: 55px 55px 0 0;
            background: #000;
            box-shadow: 
                inset 0 10px 15px rgba(255,0,0,0.6),
                0 -3px 0 rgba(0,0,0,0.5);
            z-index: 1;
        }

        /* SPIKES ON SIDES */
        .spike-left {
            position: absolute;
            left: -18px;
            width: 0;
            height: 0;
            border-top: 14px solid transparent;
            border-bottom: 14px solid transparent;
            border-right: 28px solid var(--arcade-red);
            filter: drop-shadow(-3px 0 0 #000);
        }

        .spike-left-1 { top: 40%; }
        .spike-left-2 { top: 55%; }
        .spike-left-3 { top: 70%; }

        .spike-right {
            position: absolute;
            right: -18px;
            width: 0;
            height: 0;
            border-top: 14px solid transparent;
            border-bottom: 14px solid transparent;
            border-left: 28px solid var(--arcade-red);
            filter: drop-shadow(3px 0 0 #000);
        }

        .spike-right-1 { top: 40%; }
        .spike-right-2 { top: 55%; }
        .spike-right-3 { top: 70%; }

        /* Taunt bubble */
        .taunt-bubble {
            position: absolute;
            top: -70px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--arcade-yellow);
            color: #000;
            padding: 12px;
            border: 4px solid #000;
            font-size: 0.6rem;
            white-space: nowrap;
            animation: tauntPop 0.3s;
            z-index: 10;
            box-shadow: 4px 4px 0 rgba(0,0,0,0.5);
        }

        @keyframes tauntPop {
            0% { transform: translateX(-50%) scale(0) rotate(-5deg); }
            50% { transform: translateX(-50%) scale(1.1) rotate(2deg); }
            100% { transform: translateX(-50%) scale(1) rotate(0deg); }
        }

        .tabs { display: flex; gap: 5px; margin-bottom: 20px; flex-wrap: wrap; }

        .tab {
            flex: 1; min-width: 120px; padding: 15px 10px; background: #000;
            border: 3px solid var(--arcade-green); color: var(--arcade-green);
            font-size: 0.6rem; cursor: pointer; transition: all 0.2s;
            text-align: center; letter-spacing: 1px;
        }

        .tab:hover { background: var(--arcade-green); color: #000; transform: scale(1.05); }

        .tab.active {
            background: var(--arcade-yellow); border-color: var(--arcade-yellow);
            color: #000; animation: tabFlash 1s infinite;
        }

        @keyframes tabFlash {
            0%, 49%, 51%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }

        .panel {
            background: #000; border: 3px solid var(--arcade-green);
            padding: 20px; margin-bottom: 20px;
        }

        .tab-content { display: none; }
        .tab-content.active { display: block; animation: pixelFade 0.3s; }

        @keyframes pixelFade {
            0% { opacity: 0; transform: translateY(10px); }
            100% { opacity: 1; transform: translateY(0); }
        }

        .input-group { margin-bottom: 15px; }

        label {
            display: block; color: var(--arcade-yellow); font-size: 0.7rem;
            margin-bottom: 8px; letter-spacing: 2px;
        }

        input, select {
            width: 100%; padding: 12px; background: #000;
            border: 3px solid var(--arcade-cyan); color: var(--arcade-green);
            font-family: 'Press Start 2P', monospace; font-size: 0.7rem;
        }

        input:focus, select:focus {
            outline: none; border-color: var(--arcade-yellow);
            box-shadow: 0 0 20px var(--arcade-yellow);
        }

        button {
            background: var(--arcade-green); color: #000;
            border: 4px solid var(--arcade-green); padding: 15px 30px;
            font-family: 'Press Start 2P', monospace; font-size: 0.7rem;
            cursor: pointer; transition: all 0.2s; letter-spacing: 2px;
            box-shadow: 4px 4px 0 rgba(0,255,0,0.5);
        }

        button:hover {
            background: var(--arcade-yellow); border-color: var(--arcade-yellow);
            transform: translate(-2px, -2px); box-shadow: 6px 6px 0 rgba(255,255,0,0.5);
        }

        button:active {
            transform: translate(0, 0); box-shadow: 2px 2px 0 rgba(0,255,0,0.5);
        }

        .transaction-list { max-height: 400px; overflow-y: auto; }

        .transaction-item {
            background: #111; border: 2px solid var(--arcade-green);
            padding: 15px; margin-bottom: 10px; display: flex;
            justify-content: space-between; align-items: center; font-size: 0.6rem;
        }

        .transaction-item:hover { border-color: var(--arcade-yellow); background: #222; }

        .damage-indicator {
            position: fixed; font-size: 2rem; color: var(--arcade-red);
            text-shadow: 3px 3px 0 #000; pointer-events: none;
            z-index: 9999; animation: damageRise 1.5s ease-out forwards;
        }

        @keyframes damageRise {
            0% { transform: translateY(0) scale(1); opacity: 1; }
            100% { transform: translateY(-100px) scale(1.5); opacity: 0; }
        }

        .modal {
            display: none; position: fixed; top: 0; left: 0;
            width: 100%; height: 100%; background: rgba(0,0,0,0.95);
            z-index: 10000; justify-content: center; align-items: center;
        }

        .modal.active { display: flex; animation: pixelFade 0.3s; }

        .modal-content {
            background: #000; border: 4px solid var(--arcade-yellow);
            padding: 40px; max-width: 500px; text-align: center;
            animation: modalBounce 0.5s;
        }

        @keyframes modalBounce {
            0% { transform: scale(0); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .modal-title {
            font-size: 1.5rem; color: var(--arcade-yellow);
            margin-bottom: 20px; text-shadow: 3px 3px 0 var(--arcade-red);
        }

        .modal-message {
            font-size: 0.8rem; color: var(--arcade-cyan);
            margin-bottom: 30px; line-height: 1.8;
        }

        .stats-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px; margin-bottom: 20px;
        }

        .stat-box {
            background: #111; border: 3px solid var(--arcade-cyan);
            padding: 15px; text-align: center;
        }

        .stat-label {
            font-size: 0.6rem; color: var(--arcade-yellow); margin-bottom: 10px;
        }

        .stat-value { font-size: 1.2rem; color: var(--arcade-green); }

        .history-month {
            background: #111; border: 3px solid var(--arcade-magenta);
            padding: 20px; margin-bottom: 20px;
        }

        .history-header {
            display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 15px; padding-bottom: 15px;
            border-bottom: 2px solid var(--arcade-magenta);
        }

        .history-result {
            font-size: 1rem; padding: 10px; border: 2px solid;
        }

        .history-result.victory {
            background: rgba(0,255,0,0.1);
            border-color: var(--arcade-green);
            color: var(--arcade-green);
        }

        .history-result.defeat {
            background: rgba(255,0,0,0.1);
            border-color: var(--arcade-red);
            color: var(--arcade-red);
        }

        .category-spending {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px; margin-top: 15px;
        }

        .category-item {
            background: #000; border: 2px solid var(--arcade-cyan);
            padding: 10px; font-size: 0.6rem;
        }

        .budget-setting-item {
            background: #111; border: 2px solid var(--arcade-green);
            padding: 15px; margin-bottom: 10px; display: grid;
            grid-template-columns: 1fr 120px; gap: 15px;
            align-items: center; font-size: 0.6rem;
        }

        .budget-setting-label { color: var(--arcade-yellow); }

        .budget-setting-input {
            padding: 8px; background: #000; border: 2px solid var(--arcade-cyan);
            color: var(--arcade-green); font-family: 'Press Start 2P', monospace;
            font-size: 0.6rem; text-align: center;
        }

        .achievement {
            background: rgba(0,255,0,0.1);
            border: 3px solid var(--arcade-green);
            padding: 20px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 20px;
            transition: all 0.3s;
        }

        .achievement:hover {
            background: rgba(0,255,0,0.2);
            transform: translateX(5px);
        }

        .achievement.locked {
            background: rgba(100,100,100,0.1);
            border-color: #666;
            opacity: 0.4;
        }

        .achievement-icon {
            font-size: 2.5rem;
            min-width: 50px;
            text-align: center;
        }

        .achievement-content {
            flex: 1;
        }

        .achievement-name {
            font-size: 0.9rem;
            color: var(--arcade-yellow);
            margin-bottom: 8px;
            font-weight: bold;
        }

        .achievement-desc {
            font-size: 0.6rem;
            color: var(--arcade-cyan);
            line-height: 1.5;
        }

        .achievement-status {
            font-size: 1.5rem;
            min-width: 40px;
            text-align: center;
        }

        .insert-coin {
            position: fixed; bottom: 20px; right: 20px; background: #000;
            border: 3px solid var(--arcade-yellow); padding: 10px 20px;
            font-size: 0.6rem; color: var(--arcade-yellow);
            animation: coinBlink 1.5s infinite; z-index: 100;
        }

        @keyframes coinBlink {
            0%, 49%, 51%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        @media (max-width: 768px) {
            h1 { font-size: 1.2rem; }
            .subtitle { font-size: 0.6rem; }
            .health-bars { grid-template-columns: 1fr; }
            .pixel-character { width: 180px; height: 180px; }
            .tabs { flex-direction: column; }
        }
    </style>
</head>
<body>
    <div class="scanlines"></div>
    <div class="crt-effect"></div>
    
    <div class="container">
        <div class="arcade-header">
            <h1>BUDGET NEMESIS</h1>
            <p class="subtitle">ARCADE EDITION</p>
        </div>

        <div class="month-display" id="monthDisplay">LOADING...</div>

        <div class="stats-grid">
            <div class="stat-box">
                <div class="stat-label">VICTORIES</div>
                <div class="stat-value" id="victories">0</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">DEFEATS</div>
                <div class="stat-value" id="defeats">0</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">WIN STREAK</div>
                <div class="stat-value" id="winStreak">0</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">DAYS LEFT</div>
                <div class="stat-value" id="daysLeft">--</div>
            </div>
        </div>

        <div class="tabs">
            <div class="tab active" onclick="switchTab('battle')">BATTLE</div>
            <div class="tab" onclick="switchTab('transactions')">LOG</div>
            <div class="tab" onclick="switchTab('achievements')">TROPHIES</div>
            <div class="tab" onclick="switchTab('history')">HISTORY</div>
            <div class="tab" onclick="switchTab('settings')">SETTINGS</div>
        </div>

        <div id="battle" class="tab-content active">
            <div class="battle-screen">
                <div class="health-bars">
                    <div class="player-side">
                        <div class="character-label">YOU - BUDGET WARRIOR</div>
                        <div class="health-bar-container">
                            <div class="health-bar-fill player-health" id="playerHealth" style="width: 100%">
                                HP: 100%
                            </div>
                        </div>
                    </div>
                    <div class="nemesis-side">
                        <div class="character-label">OVERSPENDING NEMESIS</div>
                        <div class="health-bar-container">
                            <div class="health-bar-fill nemesis-health" id="nemesisHealth" style="width: 100%">
                                HP: 100%
                            </div>
                        </div>
                    </div>
                </div>

                <div class="pixel-character">
                    <div class="nemesis-sprite" id="nemesisSprite">
                        <div class="horn-left"></div>
                        <div class="horn-right"></div>
                        <div class="spike-left spike-left-1"></div>
                        <div class="spike-left spike-left-2"></div>
                        <div class="spike-left spike-left-3"></div>
                        <div class="spike-right spike-right-1"></div>
                        <div class="spike-right spike-right-2"></div>
                        <div class="spike-right spike-right-3"></div>
                        <div class="eyebrow-left"></div>
                        <div class="eyebrow-right"></div>
                        <div class="eye-container">
                            <div class="eye"><div class="pupil"></div></div>
                            <div class="eye"><div class="pupil"></div></div>
                        </div>
                        <div class="fang-row">
                            <div class="fang"></div>
                            <div class="fang"></div>
                            <div class="fang"></div>
                            <div class="fang"></div>
                        </div>
                        <div class="mouth"></div>
                        <div id="tauntBubble"></div>
                    </div>
                </div>
            </div>

            <div class="panel">
                <div class="input-group">
                    <label>CATEGORY</label>
                    <select id="category">
                        <option value="Shopping">SHOPPING</option>
                        <option value="Dining">DINING</option>
                        <option value="Groceries">GROCERIES</option>
                        <option value="Transportation">TRANSPORT</option>
                        <option value="Home Improvement">HOME IMPROVE</option>
                        <option value="Healthcare">HEALTHCARE</option>
                        <option value="Professional">PROFESSIONAL</option>
                        <option value="Utilities">UTILITIES</option>
                        <option value="Miscellaneous">MISC</option>
                    </select>
                </div>
                <div class="input-group">
                    <label>AMOUNT $</label>
                    <input type="number" id="amount" placeholder="0.00" step="0.01">
                </div>
                <div class="input-group">
                    <label>DESCRIPTION</label>
                    <input type="text" id="description" placeholder="WHAT DID YOU BUY?">
                </div>
                <button onclick="addTransaction()" style="width: 100%; margin-top: 10px;">
                    ENTER SPENDING
                </button>
            </div>
        </div>

        <div id="transactions" class="tab-content">
            <div class="panel">
                <h2 style="color: var(--arcade-yellow); margin-bottom: 20px; font-size: 1rem;">
                    CURRENT MONTH LOG
                </h2>
                <div class="transaction-list" id="transactionList"></div>
            </div>
        </div>

        <div id="achievements" class="tab-content">
            <div class="panel">
                <h2 style="color: var(--arcade-yellow); margin-bottom: 20px; font-size: 1rem;">
                    ACHIEVEMENTS UNLOCKED
                </h2>
                <div id="achievementList"></div>
            </div>
        </div>

        <div id="history" class="tab-content">
            <div class="panel">
                <h2 style="color: var(--arcade-yellow); margin-bottom: 20px; font-size: 1rem;">
                    BATTLE HISTORY
                </h2>
                <div id="historyList"></div>
            </div>
        </div>

        <div id="settings" class="tab-content">
            <div class="panel">
                <h2 style="color: var(--arcade-yellow); margin-bottom: 20px; font-size: 1rem;">
                    BUDGET CONFIG
                </h2>
                <div id="budgetSettings"></div>
                <button onclick="saveBudgetSettings()" style="margin-top: 20px; width: 100%;">
                    SAVE BUDGETS
                </button>
            </div>

            <div class="panel" style="border-color: var(--arcade-red);">
                <h2 style="color: var(--arcade-red); margin-bottom: 20px; font-size: 1rem;">
                    DANGER ZONE
                </h2>
                <button onclick="resetCurrentMonth()" style="background: var(--arcade-yellow); border-color: var(--arcade-yellow); margin-bottom: 10px; width: 100%;">
                    RESET THIS MONTH
                </button>
                <button onclick="resetAllData()" style="background: var(--arcade-red); border-color: var(--arcade-red); width: 100%;">
                    RESET ALL DATA
                </button>
            </div>

            <div class="panel">
                <h2 style="color: var(--arcade-yellow); margin-bottom: 20px; font-size: 1rem;">
                    DATA BACKUP
                </h2>
                <button onclick="exportData()" style="background: var(--arcade-cyan); border-color: var(--arcade-cyan); margin-bottom: 10px; width: 100%;">
                    EXPORT DATA
                </button>
                <button onclick="document.getElementById('importFile').click()" style="background: var(--arcade-magenta); border-color: var(--arcade-magenta); width: 100%;">
                    IMPORT DATA
                </button>
                <input type="file" id="importFile" accept=".json" style="display: none;" onchange="importData(event)">
            </div>
        </div>
    </div>

    <div class="insert-coin">INSERT COIN</div>

    <div class="modal" id="victoryModal">
        <div class="modal-content">
            <h2 class="modal-title">VICTORY!</h2>
            <p class="modal-message" id="victoryMessage"></p>
            <button onclick="closeModal()">CONTINUE</button>
        </div>
    </div>

    <div class="modal" id="defeatModal">
        <div class="modal-content" style="border-color: var(--arcade-red);">
            <h2 class="modal-title" style="color: var(--arcade-red);">GAME OVER</h2>
            <p class="modal-message" id="defeatMessage"></p>
            <button onclick="closeModal()">CONTINUE</button>
        </div>
    </div>

    <script>
        let gameState = {
            currentMonth: '',
            playerHealth: 100,
            nemesisHealth: 100,
            victories: 0,
            defeats: 0,
            winStreak: 0,
            totalDamageDealt: 0,
            lastLogDate: null,
            consecutiveLogDays: 0,
            maxConsecutiveLogDays: 0,
            zeroSpendDays: 0,
            maxZeroSpendStreak: 0,
            currentZeroSpendStreak: 0,
            budgets: {
                'Shopping': 500,
                'Dining': 150,
                'Groceries': 540,
                'Transportation': 150,
                'Home Improvement': 200,
                'Healthcare': 356,
                'Professional': 396,
                'Utilities': 590,
                'Miscellaneous': 200
            },
            currentSpending: {},
            currentTransactions: [],
            history: [],
            achievements: {
                'First Entry': { unlocked: false, name: 'First Entry', desc: 'Log your first transaction', icon: 'ðŸ“' },
                'Daily Logger': { unlocked: false, name: 'Daily Logger', desc: 'Log transactions 7 days in a row', icon: 'ðŸ“…' },
                'Dedicated Tracker': { unlocked: false, name: 'Dedicated Tracker', desc: 'Log transactions 30 days in a row', icon: 'ðŸ”¥' },
                'No Spend Day': { unlocked: false, name: 'No Spend Day', desc: 'Go one day without spending', icon: 'ðŸš«' },
                'No Spend Week': { unlocked: false, name: 'No Spend Week', desc: 'Achieve 7 zero-spend days', icon: 'â­' },
                'Budget Master': { unlocked: false, name: 'Budget Master', desc: 'Stay under budget for one month', icon: 'ðŸ‘‘' },
                'Budget Warrior': { unlocked: false, name: 'Budget Warrior', desc: 'Stay under budget 3 months in a row', icon: 'âš”ï¸' },
                'Budget Legend': { unlocked: false, name: 'Budget Legend', desc: 'Stay under budget 6 months in a row', icon: 'ðŸ†' }
            }
        };

        const taunts = [
            "BUY MORE STUFF!",
            "YOU'RE BROKE!",
            "NICE TRY LOSER!",
            "GIMME YOUR MONEY!",
            "OUCH! THAT HURT!",
            "IS THAT ALL?",
            "WEAK ATTACK!",
            "HAHA SUCKER!",
            "SPEND MORE!",
            "I'M WINNING!"
        ];

        function init() {
            loadGameState();
            checkMonthReset();
            initializeCurrentMonth();
            checkDailyProgress();
            updateDisplay();
            updateBattleScreen();
            updateAchievements();
            updateHistory();
        }

        function getCurrentMonthKey() {
            const now = new Date();
            return `${now.getFullYear()}-${String(now.getMonth() + 1).padStart(2, '0')}`;
        }

        function checkMonthReset() {
            const currentMonthKey = getCurrentMonthKey();
            
            if (gameState.currentMonth !== currentMonthKey) {
                if (gameState.currentMonth && gameState.currentTransactions.length > 0) {
                    saveMonthToHistory();
                }
                
                gameState.currentMonth = currentMonthKey;
                gameState.playerHealth = 100;
                gameState.nemesisHealth = 100;
                gameState.currentSpending = {};
                gameState.currentTransactions = [];
                
                Object.keys(gameState.budgets).forEach(cat => {
                    gameState.currentSpending[cat] = 0;
                });
                
                saveGameState();
            }
        }

        function initializeCurrentMonth() {
            if (!gameState.currentSpending || Object.keys(gameState.currentSpending).length === 0) {
                gameState.currentSpending = {};
                Object.keys(gameState.budgets).forEach(cat => {
                    gameState.currentSpending[cat] = 0;
                });
            }
        }

        function saveMonthToHistory() {
            const totalBudget = Object.values(gameState.budgets).reduce((a, b) => a + b, 0);
            const totalSpent = Object.values(gameState.currentSpending).reduce((a, b) => a + b, 0);
            const victory = totalSpent <= totalBudget;
            
            const historyEntry = {
                month: gameState.currentMonth,
                playerHealth: gameState.playerHealth,
                nemesisHealth: gameState.nemesisHealth,
                totalBudget: totalBudget,
                totalSpent: totalSpent,
                spending: { ...gameState.currentSpending },
                transactions: [...gameState.currentTransactions],
                result: victory ? 'victory' : 'defeat',
                date: new Date().toISOString()
            };
            
            gameState.history.unshift(historyEntry);
            
            if (gameState.history.length > 12) {
                gameState.history = gameState.history.slice(0, 12);
            }
            
            if (victory) {
                gameState.victories++;
                gameState.winStreak++;
            } else {
                gameState.defeats++;
                gameState.winStreak = 0;
            }
        }

        function getDaysLeftInMonth() {
            const now = new Date();
            const lastDay = new Date(now.getFullYear(), now.getMonth() + 1, 0);
            return lastDay.getDate() - now.getDate();
        }

        function updateDisplay() {
            const now = new Date();
            const monthName = now.toLocaleDateString('en-US', { month: 'long', year: 'numeric' });
            document.getElementById('monthDisplay').textContent = `CURRENT BATTLE: ${monthName.toUpperCase()}`;
            
            document.getElementById('victories').textContent = gameState.victories;
            document.getElementById('defeats').textContent = gameState.defeats;
            document.getElementById('winStreak').textContent = gameState.winStreak;
            document.getElementById('daysLeft').textContent = getDaysLeftInMonth();
            
            updateTransactionList();
        }

        function updateBattleScreen() {
            const playerBar = document.getElementById('playerHealth');
            const nemesisBar = document.getElementById('nemesisHealth');
            
            playerBar.style.width = gameState.playerHealth + '%';
            playerBar.textContent = `HP: ${Math.round(gameState.playerHealth)}%`;
            
            nemesisBar.style.width = gameState.nemesisHealth + '%';
            nemesisBar.textContent = `HP: ${Math.round(gameState.nemesisHealth)}%`;
        }

        function calculateHealth() {
            const totalBudget = Object.values(gameState.budgets).reduce((a, b) => a + b, 0);
            const totalSpent = Object.values(gameState.currentSpending).reduce((a, b) => a + b, 0);
            
            gameState.playerHealth = Math.max(0, ((totalBudget - totalSpent) / totalBudget) * 100);
            
            const savedAmount = Math.max(0, totalBudget - totalSpent);
            const nemesisDamage = (savedAmount / totalBudget) * 100;
            gameState.nemesisHealth = Math.max(0, 100 - nemesisDamage);
            
            updateBattleScreen();
        }

        function showTaunt(message) {
            const bubble = document.getElementById('tauntBubble');
            bubble.className = 'taunt-bubble';
            bubble.textContent = message;
            
            setTimeout(() => {
                bubble.className = '';
                bubble.textContent = '';
            }, 2000);
        }

        function showDamageIndicator(amount, x, y) {
            const damage = document.createElement('div');
            damage.className = 'damage-indicator';
            damage.textContent = `-$${amount.toFixed(2)}`;
            damage.style.left = x + 'px';
            damage.style.top = y + 'px';
            document.body.appendChild(damage);
            
            setTimeout(() => damage.remove(), 1500);
        }

        function addTransaction() {
            const category = document.getElementById('category').value;
            const amount = parseFloat(document.getElementById('amount').value);
            const description = document.getElementById('description').value;

            if (!amount || amount <= 0) {
                alert('INVALID AMOUNT');
                return;
            }

            const transaction = {
                id: Date.now(),
                category,
                amount,
                description,
                date: new Date().toISOString()
            };

            gameState.currentTransactions.unshift(transaction);
            gameState.currentSpending[category] = (gameState.currentSpending[category] || 0) + amount;

            // Track logging streak
            const today = new Date().toDateString();
            if (gameState.lastLogDate !== today) {
                const yesterday = new Date(Date.now() - 86400000).toDateString();
                if (gameState.lastLogDate === yesterday) {
                    gameState.consecutiveLogDays++;
                } else {
                    gameState.consecutiveLogDays = 1;
                }
                gameState.lastLogDate = today;
                gameState.maxConsecutiveLogDays = Math.max(gameState.maxConsecutiveLogDays, gameState.consecutiveLogDays);
                
                // Reset zero spend streak since they spent today
                gameState.currentZeroSpendStreak = 0;
            }

            const x = Math.random() * (window.innerWidth - 200) + 100;
            const y = Math.random() * 300 + 100;
            showDamageIndicator(amount, x, y);

            const taunt = taunts[Math.floor(Math.random() * taunts.length)];
            showTaunt(taunt);

            document.getElementById('nemesisSprite').classList.add('damaged');
            setTimeout(() => {
                document.getElementById('nemesisSprite').classList.remove('damaged');
            }, 500);

            calculateHealth();
            checkAchievements();
            checkGameOver();
            updateDisplay();
            saveGameState();

            document.getElementById('amount').value = '';
            document.getElementById('description').value = '';
        }

        function checkAchievements() {
            const achievements = gameState.achievements;

            // First Entry
            if (gameState.currentTransactions.length >= 1 && !achievements['First Entry'].unlocked) {
                achievements['First Entry'].unlocked = true;
                showAchievementUnlock('First Entry');
            }

            // Daily Logger - 7 days in a row
            if (gameState.consecutiveLogDays >= 7 && !achievements['Daily Logger'].unlocked) {
                achievements['Daily Logger'].unlocked = true;
                showAchievementUnlock('Daily Logger');
            }

            // Dedicated Tracker - 30 days in a row
            if (gameState.consecutiveLogDays >= 30 && !achievements['Dedicated Tracker'].unlocked) {
                achievements['Dedicated Tracker'].unlocked = true;
                showAchievementUnlock('Dedicated Tracker');
            }

            // No Spend Day
            if (gameState.currentZeroSpendStreak >= 1 && !achievements['No Spend Day'].unlocked) {
                achievements['No Spend Day'].unlocked = true;
                showAchievementUnlock('No Spend Day');
            }

            // No Spend Week - 7 zero spend days total
            if (gameState.zeroSpendDays >= 7 && !achievements['No Spend Week'].unlocked) {
                achievements['No Spend Week'].unlocked = true;
                showAchievementUnlock('No Spend Week');
            }

            // Budget Master - stay under budget for one month
            if (gameState.victories >= 1 && !achievements['Budget Master'].unlocked) {
                achievements['Budget Master'].unlocked = true;
                showAchievementUnlock('Budget Master');
            }

            // Budget Warrior - 3 months in a row
            if (gameState.winStreak >= 3 && !achievements['Budget Warrior'].unlocked) {
                achievements['Budget Warrior'].unlocked = true;
                showAchievementUnlock('Budget Warrior');
            }

            // Budget Legend - 6 months in a row
            if (gameState.winStreak >= 6 && !achievements['Budget Legend'].unlocked) {
                achievements['Budget Legend'].unlocked = true;
                showAchievementUnlock('Budget Legend');
            }

            updateAchievements();
        }

        function showAchievementUnlock(achievementName) {
            const achievement = gameState.achievements[achievementName];
            showModal('victoryModal', 
                'ACHIEVEMENT UNLOCKED!', 
                `${achievement.icon} ${achievement.name}<br><br>${achievement.desc}`);
        }

        function updateAchievements() {
            const list = document.getElementById('achievementList');
            if (!list) return;
            
            list.innerHTML = '';

            Object.entries(gameState.achievements).forEach(([key, achievement]) => {
                const item = document.createElement('div');
                item.className = 'achievement' + (achievement.unlocked ? '' : ' locked');
                item.innerHTML = `
                    <div class="achievement-icon">${achievement.icon}</div>
                    <div class="achievement-content">
                        <div class="achievement-name">${achievement.name}</div>
                        <div class="achievement-desc">${achievement.desc}</div>
                    </div>
                    <div class="achievement-status">
                        ${achievement.unlocked ? 'âœ…' : 'ðŸ”’'}
                    </div>
                `;
                list.appendChild(item);
            });
        }

        function checkDailyProgress() {
            // Check if we should count a zero-spend day
            const today = new Date().toDateString();
            const lastTransactionToday = gameState.currentTransactions.some(t => {
                return new Date(t.date).toDateString() === today;
            });

            if (!lastTransactionToday && gameState.lastLogDate) {
                const yesterday = new Date(Date.now() - 86400000).toDateString();
                if (gameState.lastLogDate === yesterday) {
                    gameState.currentZeroSpendStreak++;
                    gameState.zeroSpendDays++;
                    gameState.maxZeroSpendStreak = Math.max(gameState.maxZeroSpendStreak, gameState.currentZeroSpendStreak);
                    checkAchievements();
                }
            }
        }

        function checkGameOver() {
            if (gameState.playerHealth <= 0) {
                showModal('defeatModal', 
                    'GAME OVER!',
                    'YOU HAVE BEEN DEFEATED BY THE NEMESIS!<br><br>YOU OVERSPENT YOUR BUDGET!');
            } else if (gameState.nemesisHealth <= 0) {
                showModal('victoryModal',
                    'VICTORY!',
                    'YOU DEFEATED THE OVERSPENDING NEMESIS!<br><br>EXCELLENT BUDGET CONTROL!');
            }
        }

        function updateTransactionList() {
            const list = document.getElementById('transactionList');
            list.innerHTML = '';

            if (gameState.currentTransactions.length === 0) {
                list.innerHTML = '<p style="color: var(--arcade-yellow); text-align: center; padding: 20px; font-size: 0.7rem;">NO TRANSACTIONS THIS MONTH</p>';
                return;
            }

            gameState.currentTransactions.forEach(t => {
                const item = document.createElement('div');
                item.className = 'transaction-item';
                item.innerHTML = `
                    <div>
                        <div style="color: var(--arcade-yellow); margin-bottom: 5px;">${t.category}</div>
                        <div style="color: var(--arcade-cyan);">${t.description || 'NO DESCRIPTION'}</div>
                        <div style="color: var(--arcade-green); margin-top: 5px;">${new Date(t.date).toLocaleDateString()}</div>
                    </div>
                    <div style="color: var(--arcade-red); font-size: 0.8rem;">
                        -$${t.amount.toFixed(2)}
                    </div>
                `;
                list.appendChild(item);
            });
        }

        function updateHistory() {
            const list = document.getElementById('historyList');
            list.innerHTML = '';

            if (gameState.history.length === 0) {
                list.innerHTML = '<p style="color: var(--arcade-yellow); text-align: center; padding: 20px; font-size: 0.7rem;">NO BATTLE HISTORY YET</p>';
                return;
            }

            gameState.history.forEach(entry => {
                const monthDate = new Date(entry.month + '-01');
                const monthName = monthDate.toLocaleDateString('en-US', { month: 'long', year: 'numeric' });
                
                const historyItem = document.createElement('div');
                historyItem.className = 'history-month';
                
                let categoryHTML = '';
                Object.entries(entry.spending).forEach(([cat, spent]) => {
                    const budget = entry.totalBudget ? (gameState.budgets[cat] || 0) : 0;
                    categoryHTML += `
                        <div class="category-item">
                            <div style="color: var(--arcade-yellow); margin-bottom: 5px;">${cat}</div>
                            <div style="color: var(--arcade-cyan);">$${spent.toFixed(2)} / $${budget.toFixed(2)}</div>
                        </div>
                    `;
                });
                
                historyItem.innerHTML = `
                    <div class="history-header">
                        <div style="color: var(--arcade-yellow); font-size: 0.8rem;">${monthName.toUpperCase()}</div>
                        <div class="history-result ${entry.result}">
                            ${entry.result === 'victory' ? 'VICTORY' : 'DEFEAT'}
                        </div>
                    </div>
                    <div style="font-size: 0.7rem; margin-bottom: 15px;">
                        <div style="color: var(--arcade-cyan);">SPENT: $${entry.totalSpent.toFixed(2)}</div>
                        <div style="color: var(--arcade-yellow);">BUDGET: $${entry.totalBudget.toFixed(2)}</div>
                        <div style="color: ${entry.result === 'victory' ? 'var(--arcade-green)' : 'var(--arcade-red)'};">
                            ${entry.result === 'victory' ? 'UNDER' : 'OVER'} BY: $${Math.abs(entry.totalBudget - entry.totalSpent).toFixed(2)}
                        </div>
                    </div>
                    <div class="category-spending">${categoryHTML}</div>
                `;
                
                list.appendChild(historyItem);
            });
        }

        function switchTab(tabName) {
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');

            if (tabName === 'achievements') {
                updateAchievements();
            }
            if (tabName === 'history') {
                updateHistory();
            }
            if (tabName === 'settings') {
                updateBudgetSettings();
            }
        }

        function updateBudgetSettings() {
            const container = document.getElementById('budgetSettings');
            container.innerHTML = '';

            Object.entries(gameState.budgets).forEach(([category, budget]) => {
                const item = document.createElement('div');
                item.className = 'budget-setting-item';
                item.innerHTML = `
                    <div class="budget-setting-label">${category}</div>
                    <input type="number" 
                           class="budget-setting-input" 
                           id="budget-${category}" 
                           value="${budget}" 
                           min="0" 
                           step="10">
                `;
                container.appendChild(item);
            });
        }

        function saveBudgetSettings() {
            let changed = false;
            Object.keys(gameState.budgets).forEach(category => {
                const input = document.getElementById(`budget-${category}`);
                const newValue = parseFloat(input.value);
                if (newValue && newValue > 0 && newValue !== gameState.budgets[category]) {
                    gameState.budgets[category] = newValue;
                    changed = true;
                }
            });

            if (changed) {
                calculateHealth();
                saveGameState();
                showModal('victoryModal', 'SETTINGS SAVED!', 'BUDGET CONFIGURATION UPDATED!');
            }
        }

        function resetCurrentMonth() {
            if (confirm('RESET THIS MONTH? ALL CURRENT DATA WILL BE LOST!')) {
                gameState.currentSpending = {};
                gameState.currentTransactions = [];
                gameState.playerHealth = 100;
                gameState.nemesisHealth = 100;
                
                Object.keys(gameState.budgets).forEach(cat => {
                    gameState.currentSpending[cat] = 0;
                });
                
                saveGameState();
                updateDisplay();
                updateBattleScreen();
                showModal('victoryModal', 'MONTH RESET!', 'NEW BATTLE BEGINS!');
            }
        }

        function resetAllData() {
            if (confirm('DELETE ALL DATA? THIS CANNOT BE UNDONE!')) {
                if (confirm('ARE YOU SURE? ALL HISTORY WILL BE LOST!')) {
                    localStorage.removeItem('budgetNemesisState');
                    location.reload();
                }
            }
        }

        function exportData() {
            const dataStr = JSON.stringify(gameState, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `budget-nemesis-backup-${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            URL.revokeObjectURL(url);
            
            showModal('victoryModal', 'DATA EXPORTED!', 'BACKUP FILE DOWNLOADED!');
        }

        function importData(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const imported = JSON.parse(e.target.result);
                    gameState = { ...gameState, ...imported };
                    saveGameState();
                    updateDisplay();
                    updateBattleScreen();
                    updateHistory();
                    showModal('victoryModal', 'DATA IMPORTED!', 'BACKUP RESTORED SUCCESSFULLY!');
                } catch (error) {
                    alert('ERROR: INVALID BACKUP FILE!');
                }
            };
            reader.readAsText(file);
            
            event.target.value = '';
        }

        function showModal(modalId, title, message) {
            document.getElementById(modalId).classList.add('active');
            const messageEl = document.getElementById(modalId === 'victoryModal' ? 'victoryMessage' : 'defeatMessage');
            messageEl.innerHTML = message;
        }

        function closeModal() {
            document.querySelectorAll('.modal').forEach(modal => modal.classList.remove('active'));
        }

        function saveGameState() {
            localStorage.setItem('budgetNemesisState', JSON.stringify(gameState));
        }

        function loadGameState() {
            const saved = localStorage.getItem('budgetNemesisState');
            if (saved) {
                const loaded = JSON.parse(saved);
                gameState = { ...gameState, ...loaded };
            }
        }

        init();

        setInterval(() => {
            checkMonthReset();
            updateDisplay();
        }, 3600000);
    </script>
</body>
</html>
